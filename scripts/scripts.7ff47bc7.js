"use strict";angular.module("geocoderApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap","uiGmapgoogle-maps"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",reloadOnSearch:!1}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),angular.module("geocoderApp").config(["uiGmapGoogleMapApiProvider",function(a){a.configure({key:"AIzaSyB7YXoHGTXoXMqZfXojJKU_8trH8Go_gH4",v:"3.17",libraries:"weather,geometry,visualization"})}]).directive("resize",["$window",function(a){return function(b){var c=angular.element(a);b.getWindowDimensions=function(){return{h:c.height(),w:c.width()}},b.$watch(b.getWindowDimensions,function(a){$("#datacol").css($("#datacol").prop("offsetHeight")-a.h>=0?{overflow:"auto"}:{overflow:"hidden"}),a.w<992?($("#datacol").css({overflow:"hidden"}),$("#datacol").css({height:"auto"}),$(".angular-google-map-container").height(400)):($(".angular-google-map-container").height(a.h-0),$("#datacol").height(a.h-0))},!0),c.bind("resize",function(){b.$apply()})}}]).controller("MainCtrl",["$scope","$routeParams","$location","$http","uiGmapGoogleMapApi",function(a,b,c,d,e){a.map={center:{latitude:51.47732,longitude:-37e-5},options:{maxZoom:20,minZoom:3},zoom:3,control:{},marker:{idk:0}},e.then(function(){function b(a){a=1*a;var b=a>0?"N":"S";a=Math.abs(a);var c=Math.floor(a),d=Math.floor(60*(a-c)),e=(3600*(a-c-d/60)).toFixed(1);return c+"° "+d+"' "+e+'" '+b}function e(a){a=1*a;var b=a>0?"E":"W";a=Math.abs(a);var c=Math.floor(a),d=Math.floor(60*(a-c)),e=(3600*(a-c-d/60)).toFixed(1);return c+"° "+d+"' "+e+'" '+b}a.codeAddress=function(f){var g=new google.maps.ElevationService,h=new google.maps.Geocoder;h.geocode({address:f},function(f,h){if(h==google.maps.GeocoderStatus.OK){var i=f[0].geometry.location,j=i.lat(),k=i.lng();a.formatted_address=f[0].formatted_address,a.address_components=f[0].address_components,a.map.control.getGMap().setCenter(f[0].geometry.location),a.map.control.getGMap().fitBounds(f[0].geometry.viewport),a.map.marker.idk=1,a.map.marker.latitude=j,a.map.marker.longitude=k,a.panelsLocation=[{Prop:"Latitude",Icon:"glyphicon-map-marker",Unit:"Decimal Degrees",Value:j.toFixed(5)},{Prop:"Longitude",Icon:"glyphicon-map-marker",Unit:"Decimal Degrees",Value:k.toFixed(5)},{Prop:"Latitude",Icon:"glyphicon-globe",Unit:"Degree Minutes Seconds",Value:b(j)},{Prop:"Longitude",Icon:"glyphicon-globe",Unit:"Degree Minutes Seconds",Value:e(k)}];var l={locations:[i]};g.getElevationForLocations(l,function(b,c){if(c==google.maps.ElevationStatus.OK&&b[0]){var d=parseFloat(b[0].elevation),e=3.2808*d;a.panelsElevation=[{Prop:"Elevation",Icon:"glyphicon-globe",Unit:"Meters",Value:d.toFixed(2)},{Prop:"Elevation",Icon:"glyphicon-globe",Unit:"Feet",Value:e.toFixed(1)}]}});var m=Math.round((new Date).getTime()/1e3).toString();d.get("https://maps.googleapis.com/maps/api/timezone/json?location="+j+","+k+"&timestamp="+m+"&sensor=false&key=AIzaSyB7YXoHGTXoXMqZfXojJKU_8trH8Go_gH4").success(function(b){null!=b.timeZoneId&&(a.panelsTimeZone=[{Prop:"Offset for DST",Icon:"glyphicon-time",Unit:"Seconds",Value:b.dstOffset},{Prop:"Offset from UTC",Icon:"glyphicon-time",Unit:"Seconds",Value:b.rawOffset},{Prop:"Time Zone",Icon:"glyphicon-globe",Unit:"",Value:b.timeZoneName},{Prop:"Time Zone Id",Icon:"glyphicon-globe",Unit:"",Value:b.timeZoneId}])}),c.search("address",encodeURI(a.formatted_address));var n={longUrl:c.absUrl()};d.post("https://www.googleapis.com/urlshortener/v1/url?key=AIzaSyB7YXoHGTXoXMqZfXojJKU_8trH8Go_gH4",n).success(function(b){a.short_url=b.id})}else alert("Geocode was not successful for the following reason: "+h)})};var f="";void 0===!c.search().address&&(f=c.search().address),f.length>0?(a.address=decodeURI(f),a.codeAddress(a.address)):(a.address="Blackheath Avenue, London SE10 8XJ, United Kingdom",a.codeAddress(a.address))})}]).filter("remove_underscore",function(){return function(a){return a=a.replace(/_/g," ")}}).filter("CapitalizeFirst",function(){return function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}}),angular.module("geocoderApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]);